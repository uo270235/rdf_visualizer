(this.webpackJsonpTFG_UO270235=this.webpackJsonpTFG_UO270235||[]).push([[0],{277:function(e,t){e.exports=class{constructor(e,t){this.texto=t,this.shapes=e,this.componentCounter=0,this.existingClasses=[],this.uml="@startuml\n        allowmixing\n        skinparam component {\n        BackgroundColor<<AND>> #1E3A8A\n        BorderColor<<AND>> #60A5FA\n        FontColor<<AND>> #E0F2FE\n        \n        BackgroundColor<<NOT>> #F87171\n        BorderColor<<NOT>> #B91C1C\n        FontColor<<NOT>> #FFFFFF\n        \n        BackgroundColor<<OR>> #065F46\n        BorderColor<<OR>> #6EE7B7\n        FontColor<<OR>> #D1FAE5\n        }\n        \n        skinparam {\n        Shadowing true\n        RoundCorner 15\n        }\n        "}parseSentence(e){e=e.replace(/\bAND\b/gi,"AND").replace(/\bOR\b/gi,"OR").replace(/\bNOT\b/gi,"NOT");const t=[];let n="",a=0;for(;a<e.length;)" "===e[a]?(n&&(t.push(n.replace(/:/g,"").trim()),n=""),a++):"AND"===e.slice(a,a+3)||"OR"===e.slice(a,a+2)?(n&&t.push(n.replace(/:/g,"").trim()),n="",t.push("AND"===e.slice(a,a+3)?"AND":"OR"),a+="AND"===e.slice(a,a+3)?3:2):"NOT"===e.slice(a,a+3)?(n&&t.push(n.replace(/:/g,"").trim()),n="",t.push("NOT"),a+=3):(n+=e[a],a++);return n&&t.push(n.replace(/:/g,"").trim()),t}generatePlantUML(e){const t=[],n=[];let a=e.shift();const r={OR:1,AND:2,NOT:3};for(e.forEach((e=>{if("AND"===e||"OR"===e||"NOT"===e){for(;n.length>0&&r[n[n.length-1]]>=r[e];)t.push(n.pop());n.push(e)}else t.push(e)}));n.length>0;)t.push(n.pop());const s=new Set;this.existingClasses.includes(a)||(this.uml+="class ".concat(a,"{\n").concat(this.extraerContenidoClase(a),"\n}\n"),this.existingClasses.push(a)),s.add(a),t.forEach((e=>{"AND"===e||"OR"===e||"NOT"===e||s.has(e)||(this.existingClasses.includes(e)||(this.uml+="class ".concat(e,"{\n").concat(this.extraerContenidoClase(e),"\n}\n"),this.existingClasses.push(e)),s.add(e))}));const o=[];t.forEach((e=>{if("AND"===e||"OR"===e||"NOT"===e){const t="".concat(e,"_").concat(this.componentCounter++);if(this.uml+="component [ ] as ".concat(t," <<").concat(e,">>\n"),"NOT"===e){const e=o.pop();this.uml+="".concat(t," --\x3e ").concat(e,"\n"),o.push(t)}else{const e=o.pop(),n=o.pop();this.uml+="".concat(t," --\x3e ").concat(n,"\n"),this.uml+="".concat(t," --\x3e ").concat(e,"\n"),o.push(t)}}else o.push(e)}));const c=o.pop();this.uml+="".concat(a," --\x3e ").concat(c,"\n")}extraerContenidoClase(e){const t=new RegExp("class _?".concat(e," \\{([^}]*)\\}"),"s"),n=this.texto.match(t);return n?n[1].trim():""}parse(){return this.shapes.forEach((e=>{const t=this.parseSentence(e);this.generatePlantUML(t)})),this.uml+="@enduml",this.uml}}},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},333:function(e,t,n){var a={"./N3Lexer":100,"./N3Lexer.js":100,"./N3Parser":101,"./N3Parser.js":101,"./N3Store":169,"./N3Store.js":169,"./N3StreamParser":170,"./N3StreamParser.js":170,"./N3StreamWriter":177,"./N3StreamWriter.js":177,"./N3Util":102,"./N3Util.js":102,"./N3Writer":104,"./N3Writer.js":104};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=333},336:function(e,t){},338:function(e,t){},434:function(e,t){},464:function(e,t){},466:function(e,t){},467:function(e,t){},473:function(e,t){},475:function(e,t){},478:function(e,t){},480:function(e,t){},500:function(e,t){},516:function(e,t){},519:function(e,t){},551:function(e,t){},650:function(e,t){},652:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=652},681:function(e,t,n){},683:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),s=n(276),o=n.n(s),c=(n(285),n.p,n(286),n(287),n(61)),i=n.n(c),l=n(1);var u=Object(a.forwardRef)(((e,t)=>{const[n,r]=Object(a.useState)(null),s=Object(a.useRef)(null);return Object(a.useImperativeHandle)(t,(()=>({getYasheValue:()=>n?n.getValue():"",setYasheValue:e=>{n&&n.setValue(e)}}))),Object(a.useEffect)((()=>{if(!n){const e={persistent:!1,lineNumbers:!0},t=i()(s.current,e);t.refresh(),r(t)}}),[n]),Object(l.jsx)("div",{ref:s})})),m=n(45),d=n.n(m),h=n(277),j=n.n(h);var O=e=>{let{diagramSource:t,onSvgGenerated:n}=e;const[r,s]=Object(a.useState)("");return Object(a.useEffect)((()=>{t&&fetch("https://kroki.io/plantuml/svg",{method:"POST",headers:{"Content-Type":"text/plain"},body:t}).then((e=>e.text())).then((e=>{s(e),n&&n(e)})).catch((e=>console.error("Error generating diagram:",e)))}),[t,n]),Object(l.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})};n(681);var p=e=>{let{mensaje:t,onClose:n}=e;return Object(l.jsxs)("div",{className:"alerta",children:[Object(l.jsx)("span",{className:"alerta-mensaje",children:t}),Object(l.jsx)("button",{className:"alerta-cerrar",onClick:n,children:"\xd7"})]})},g=(n(275),n(682),n(160));var b=function(){const e=Object(a.useRef)(null),[t,n]=Object(a.useState)(""),[r,s]=Object(a.useState)(""),[o,c]=Object(a.useState)(null),[i,m]=Object(a.useState)(""),[h,b]=Object(a.useState)(!1),[x,N]=Object(a.useState)(!1);Object(a.useEffect)((()=>{const t=document.querySelectorAll(".yashe");t.length>1&&t[0].remove(),setTimeout((()=>{e.current.setYasheValue("prefix : <http://example.org/>\nprefix xsd: <http://www.w3.org/2001/XMLSchema#>\n\n:Usuario :Hombre OR :Mujer AND NOT :Perro \n\n:Hombre {\n  :genero [ :Masculino ];\n  :mascota @:Perro *;\n  :mujer @:Mujer;\n}\n\n:Mujer {\n  :genero [ :Femenino ];\n  :marido @:Hombre ; \n  :mascota @:Perro *\n}\n\n:Perro {\n  :capacidad [ :ladrar ]\n}\n")}),1)}),[]);const f=()=>{const e=document.getElementById("mermaid-diagram");e&&(e.innerHTML="",b(!1))},C=(e,t)=>{if(e){const n=new Blob([e],{type:"image/svg+xml"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download="".concat(t,".svg"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}else console.error("No Relational UML diagram content available.")};return Object(a.useEffect)((()=>{""!==t&&(()=>{try{const n=e.current.getYasheValue();d.a.shExToXMI(n);const a=d.a.shExToXMI(t);d.a.crearDiagramaUML("mermaid-diagram",a),d.a.asignarEventos("mermaid-diagram"),b(!0)}catch(a){console.error("Error al parsear ShEx:",a),c(a.message),s(""),f(),n("")}})()}),[t]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{class:"container",children:[Object(l.jsxs)("div",{className:"editor",children:[Object(l.jsx)("h1",{className:"page-title",children:"Schema (ShEx)"}),Object(l.jsx)(u,{ref:e}),Object(l.jsx)("div",{className:"editor-buttons",children:Object(l.jsx)("button",{className:"button-20",onClick:()=>{const t=e.current.getYasheValue();try{d.a.shExToXMI(t);null!==(e=>{try{const t=/:\w+\s+(NOT\s+)?(:\w+\s*(?:AND|OR|NOT|AND\s+NOT|OR\s+NOT)\s*)*:\w+/gi,a=e.match(t),r=e.replace(t,"").trim();if(n(r),!a)return s(""),N(!1),[];let o=d.a.shExToXMI(r),i=d.a.crearMUML(o);const l=new j.a(a,i).parse();return s(l),c(null),N(!0),a||[]}catch(t){return console.error("Error al parsear ShEx:",t),c(t.message),s(""),n(""),N(!1),null}})(t)&&console.log("Shapes extra\xeddas y procesadas correctamente.")}catch(a){console.error("Error al parsear ShEx:",a),c(a.message),s(""),f(),n("")}},children:"Ver Diagrama"})})]}),o&&Object(l.jsx)(p,{mensaje:"Error al parsear ShEx: ".concat(o),onClose:()=>c(null)}),Object(l.jsxs)("div",{className:"result-container",children:[r&&Object(l.jsxs)("div",{className:"diagram-container kroki-diagram","data-zoom-on-wheel":"zoom-amount: 0.01; min-scale: 0.3; max-scale: 20;","data-pan-on-drag":!0,children:[Object(l.jsx)(O,{diagramSource:r,onSvgGenerated:m}),Object(l.jsx)("div",{className:"icon-container",children:x&&Object(l.jsx)("button",{className:"download-icon",onClick:()=>{i?C(i,"diagramLogicUMLClass"):console.error("No Logic UML diagram content available.")},children:Object(l.jsx)(g.a,{})})})]}),Object(l.jsxs)("div",{className:h?x?"diagram-container mermaid-diagram":"diagram-container only-mermaid":"","data-zoom-on-wheel":"zoom-amount: 0.01; min-scale: 0.3; max-scale: 20;","data-pan-on-drag":!0,children:[Object(l.jsx)("div",{id:"mermaid-diagram"}),h&&Object(l.jsx)("button",{className:"download-icon",onClick:()=>C(document.getElementById("mermaid-diagram").innerHTML,"diagramUMLRelationalClass"),children:Object(l.jsx)(g.a,{})})]})]})]})})};var x=()=>Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("nav",{children:Object(l.jsx)("label",{className:"logo",children:"System to visualize RDF data Shapes Schemas"})})});var N=function(){return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(x,{}),Object(l.jsx)(b,{})]})};var f=e=>{e&&e instanceof Function&&n.e(5).then(n.bind(null,796)).then((t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),a(e),r(e),s(e),o(e)}))};o.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(N,{})})),f()}},[[683,1,2]]]);
//# sourceMappingURL=main.45948192.chunk.js.map